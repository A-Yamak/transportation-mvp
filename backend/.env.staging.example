# ==============================================================================
# Al-Sabiqoon Backend - STAGING Environment Configuration
# ==============================================================================
# This is a template for staging environment configuration.
# Replace all placeholder values (${...}) with actual values.
# ==============================================================================

# ------------------------------------------------------------------------------
# Application Settings
# ------------------------------------------------------------------------------

APP_NAME="Al-Sabiqoon [Staging]"
APP_ENV=staging
APP_KEY=${APP_KEY}
APP_DEBUG=true
APP_URL=https://api.staging.alsabiqoon.com
APP_TIMEZONE=UTC

APP_LOCALE=en
APP_FALLBACK_LOCALE=en

APP_MAINTENANCE_DRIVER=file

# ------------------------------------------------------------------------------
# Security
# ------------------------------------------------------------------------------

BCRYPT_ROUNDS=12

# ------------------------------------------------------------------------------
# Logging
# ------------------------------------------------------------------------------

LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

# ------------------------------------------------------------------------------
# Database (MySQL in Kubernetes)
# ------------------------------------------------------------------------------

DB_CONNECTION=mysql
DB_HOST=mysql-service
DB_PORT=3306
DB_DATABASE=alsabiqoon_staging
DB_USERNAME=${DB_USERNAME}
DB_PASSWORD=${DB_PASSWORD}

# ------------------------------------------------------------------------------
# Redis (Kubernetes Redis service)
# ------------------------------------------------------------------------------

REDIS_CLIENT=phpredis
REDIS_HOST=redis-service
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_PORT=6379

# ------------------------------------------------------------------------------
# Cache, Queue, Sessions (Redis-backed)
# ------------------------------------------------------------------------------

CACHE_STORE=redis
QUEUE_CONNECTION=redis
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_PATH=/
SESSION_DOMAIN=.staging.alsabiqoon.com
SESSION_SECURE_COOKIE=true

# ------------------------------------------------------------------------------
# Octane Configuration (FrankenPHP)
# ------------------------------------------------------------------------------

OCTANE_SERVER=frankenphp
OCTANE_HTTPS=true

# ------------------------------------------------------------------------------
# Horizon Configuration
# ------------------------------------------------------------------------------

HORIZON_PREFIX=alsabiqoon_staging_horizon:

# ------------------------------------------------------------------------------
# Broadcasting
# ------------------------------------------------------------------------------

BROADCAST_CONNECTION=redis

# ------------------------------------------------------------------------------
# Filesystem (Cloudflare R2 - separate staging bucket)
# ------------------------------------------------------------------------------

FILESYSTEM_DISK=r2

CLOUDFLARE_R2_ACCESS_KEY_ID=${R2_ACCESS_KEY_ID}
CLOUDFLARE_R2_SECRET_ACCESS_KEY=${R2_SECRET_ACCESS_KEY}
CLOUDFLARE_R2_BUCKET=alsabiqoon-staging
CLOUDFLARE_R2_ENDPOINT=https://${CLOUDFLARE_ACCOUNT_ID}.r2.cloudflarestorage.com
CLOUDFLARE_R2_URL=https://cdn.staging.alsabiqoon.com

# ------------------------------------------------------------------------------
# Mail (Mailpit or staging mail service)
# ------------------------------------------------------------------------------

MAIL_MAILER=smtp
MAIL_HOST=${MAIL_HOST}
MAIL_PORT=587
MAIL_USERNAME=${MAIL_USERNAME}
MAIL_PASSWORD=${MAIL_PASSWORD}
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@staging.alsabiqoon.com"
MAIL_FROM_NAME="${APP_NAME}"

# ------------------------------------------------------------------------------
# Debugging Tools (Enabled in staging for testing)
# ------------------------------------------------------------------------------

TELESCOPE_ENABLED=true
HORIZON_ENABLED=true

# ------------------------------------------------------------------------------
# Frontend Integration
# ------------------------------------------------------------------------------

VITE_APP_NAME="${APP_NAME}"

# ------------------------------------------------------------------------------
# Passport OAuth (API Authentication)
# ------------------------------------------------------------------------------
# Generate keys with: php artisan passport:keys
# Create password grant client with: php artisan passport:client --password

PASSPORT_PRIVATE_KEY=${PASSPORT_PRIVATE_KEY}
PASSPORT_PUBLIC_KEY=${PASSPORT_PUBLIC_KEY}

# Password Grant Client (for API authentication)
PASSPORT_PASSWORD_CLIENT_ID=${PASSPORT_PASSWORD_CLIENT_ID}
PASSPORT_PASSWORD_CLIENT_SECRET=${PASSPORT_PASSWORD_CLIENT_SECRET}

# Token Expiration (in minutes)
# Staging: 1 hour access token, 7 days refresh token
PASSPORT_TOKEN_EXPIRATION=60
PASSPORT_REFRESH_TOKEN_EXPIRATION=10080
