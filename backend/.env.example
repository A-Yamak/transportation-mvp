# ==============================================================================
# Transportation App Backend - Environment Configuration
# ==============================================================================
# This file serves as the template for local development.
# Copy to .env and configure for your local environment.
#
# For Docker development, most values are pre-configured to work with
# the docker-compose.yml in the project root.
# ==============================================================================

# ------------------------------------------------------------------------------
# Application Settings
# ------------------------------------------------------------------------------

APP_NAME="Transportation App"
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost:8000
APP_TIMEZONE=UTC

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file

# ------------------------------------------------------------------------------
# Security
# ------------------------------------------------------------------------------

BCRYPT_ROUNDS=12

# ------------------------------------------------------------------------------
# Logging
# ------------------------------------------------------------------------------

LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

# ------------------------------------------------------------------------------
# Database (MySQL for Docker, SQLite for native development)
# ------------------------------------------------------------------------------

# For Docker development:
DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=transportationapp
DB_USERNAME=transportationapp
DB_PASSWORD=secret

# For native development without Docker, uncomment:
# DB_CONNECTION=sqlite

# ------------------------------------------------------------------------------
# Redis (Required for Horizon, recommended for cache/sessions)
# ------------------------------------------------------------------------------
# IMPORTANT: When sharing Redis across environments (e.g., k3s cluster),
# use DIFFERENT database numbers and prefixes per environment to avoid conflicts.
#
# Recommended Database Numbers:
#   Local:      0 (default), 1 (cache), 2 (session)
#   Staging:    3 (default), 4 (cache), 5 (session)
#   Production: 6 (default), 7 (cache), 8 (session)
# ------------------------------------------------------------------------------

REDIS_CLIENT=phpredis
REDIS_HOST=redis
REDIS_PASSWORD=null
REDIS_PORT=6379

# Redis Database Numbers (isolate environments when sharing Redis)
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_SESSION_DB=2

# Redis Key Prefixes (include environment for extra safety)
REDIS_PREFIX=transportationapp_local_

# ------------------------------------------------------------------------------
# Cache, Queue, Sessions (Redis-backed for consistency)
# ------------------------------------------------------------------------------

CACHE_STORE=redis
CACHE_PREFIX=transportationapp_local_cache_

QUEUE_CONNECTION=redis

SESSION_DRIVER=redis
SESSION_STORE=sessions
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

# ------------------------------------------------------------------------------
# Octane Configuration (FrankenPHP)
# ------------------------------------------------------------------------------

OCTANE_SERVER=frankenphp
OCTANE_HTTPS=false

# ------------------------------------------------------------------------------
# Horizon Configuration
# ------------------------------------------------------------------------------
# IMPORTANT: Include environment in prefix when sharing Redis across environments
# Example prefixes:
#   Local:      transportationapp_local_horizon:
#   Staging:    transportationapp_staging_horizon:
#   Production: transportationapp_prod_horizon:

HORIZON_PREFIX=transportationapp_local_horizon:

# ------------------------------------------------------------------------------
# Broadcasting
# ------------------------------------------------------------------------------

BROADCAST_CONNECTION=log

# ------------------------------------------------------------------------------
# Filesystem
# ------------------------------------------------------------------------------

FILESYSTEM_DISK=local

# Cloudflare R2 (production storage)
CLOUDFLARE_R2_ACCESS_KEY_ID=
CLOUDFLARE_R2_SECRET_ACCESS_KEY=
CLOUDFLARE_R2_BUCKET=transportationapp
CLOUDFLARE_R2_ENDPOINT=
CLOUDFLARE_R2_URL=

# AWS S3 (if using instead of R2)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# ------------------------------------------------------------------------------
# Mail (Mailpit for local development)
# ------------------------------------------------------------------------------

MAIL_MAILER=smtp
MAIL_HOST=mailpit
MAIL_PORT=1025
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="noreply@transportationapp.local"
MAIL_FROM_NAME="${APP_NAME}"

# ------------------------------------------------------------------------------
# Debugging Tools & Dashboard Authorization
# ------------------------------------------------------------------------------

# Dashboard Authorization (comma-separated emails for Telescope & Horizon access)
DASHBOARD_AUTHORIZED_EMAILS=

# Telescope Configuration
TELESCOPE_ENABLED=true
TELESCOPE_PRUNE_HOURS=48
# Recording modes: all (local/staging), errors_only (production), important_only (high-traffic)
TELESCOPE_RECORDING_MODE=all

# Horizon Configuration
HORIZON_ENABLED=true

# ------------------------------------------------------------------------------
# Frontend Integration
# ------------------------------------------------------------------------------

VITE_APP_NAME="${APP_NAME}"

# ------------------------------------------------------------------------------
# Passport OAuth (API Authentication)
# ------------------------------------------------------------------------------
# Generate keys with: php artisan passport:keys
# Create password grant client with: php artisan passport:client --password

PASSPORT_PRIVATE_KEY=
PASSPORT_PUBLIC_KEY=

# Password Grant Client (for API authentication)
# These are generated when you run: php artisan passport:client --password
PASSPORT_PASSWORD_CLIENT_ID=
PASSPORT_PASSWORD_CLIENT_SECRET=

# Token Expiration (in minutes)
PASSPORT_TOKEN_EXPIRATION=60
PASSPORT_REFRESH_TOKEN_EXPIRATION=10080

# ------------------------------------------------------------------------------
# Pricing Configuration
# ------------------------------------------------------------------------------

DEFAULT_PRICE_PER_KM=0.50
MINIMUM_TRIP_COST=5.00
BASE_FEE=0.00
TAX_RATE=0.00
CURRENCY=JOD
CURRENCY_SYMBOL=JOD

# ------------------------------------------------------------------------------
# Google Maps API
# ------------------------------------------------------------------------------
# Generate API key at: https://console.cloud.google.com/google/maps-apis
# Required APIs: Directions API, Distance Matrix API

GOOGLE_MAPS_API_KEY=
GOOGLE_MAPS_CACHE_ENABLED=true
GOOGLE_MAPS_CACHE_TTL=900
GOOGLE_MAPS_RETRY_ENABLED=true
GOOGLE_MAPS_RETRY_ATTEMPTS=3
GOOGLE_MAPS_RETRY_DELAY=1000
GOOGLE_MAPS_TIMEOUT=30
GOOGLE_MAPS_COST_TRACKING=false
